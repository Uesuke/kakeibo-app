<div class="month-header">
  <button (click)="prevMonth()">◀</button>

  <span class="month-label">{{ formattedMonth }}</span>

  <button (click)="nextMonth()">▶</button>

  <button class="today" (click)="goToCurrentMonth()">今月</button>
</div>

<div class="summary">
  <div class="income">収入合計: {{ totalIncome | number }} 円</div>
  <div class="expense">支出合計: {{ totalExpense | number }} 円</div>
  <div class="balance">差引: {{ balance | number }} 円</div>
</div>

<button
  (click)="openModal()"
  [disabled]="selectedUser === 'both'"
  title="ユーザーを選択すると追加できます"
  class="create"
>
  ＋ 追加
</button>

<div class="modal-backdrop" *ngIf="showModal">
  <div class="modal">
    <app-event-form
      [editingEvent]="editingEvent"
      [isSubmitting]="isSubmitting"
      (submitEvent)="onSubmit($event)"
      (cancel)="closeModal()"
    ></app-event-form>
  </div>
</div>

<hr />

<ul class="event-list">
  <li *ngFor="let e of filteredEvents" [ngClass]="{ income: e.isIncome, expense: !e.isIncome }">
    <span class="date">{{ e.date }}</span>
    <span class="title">{{ e.title }}</span>
    <span class="amount"> {{ e.isIncome ? '+' : '-' }}{{ e.amount | number }} 円 </span>

    <div class="actions">
      <button
        class="edit"
        (click)="openEditModal(e)"
        [disabled]="selectedUser === 'both'"
        title="ユーザーを選択すると編集できます"
      >
        編集
      </button>
      <button
        class="delete"
        (click)="delete(e)"
        [disabled]="selectedUser === 'both'"
        title="ユーザーを選択すると削除できます"
      >
        削除
      </button>
    </div>
  </li>
</ul>
